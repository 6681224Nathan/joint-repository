
-- 2nd Transaction -- DIRTY READ
/*2nd Query Statement*/
USE concurrency;
#SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;

SELECT * 
FROM Balance;

#---------------------------------------------------------- next test LOST UPDATE
-- 2nd Transaction -- 

USE concurrency;

#SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;
START TRANSACTION;
UPDATE Balance 
SET Balance = 2500
WHERE AccountID = 2;

SELECT SLEEP(10);

COMMIT;
SELECT *
FROM Balance;

-- 2nd Transaction -- NON REPEATABLE READ 
USE concurrency;
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
-- SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;

START TRANSACTION;

SELECT	* 
FROM	Employee
WHERE	WorkDept = 'D11';

SELECT SLEEP(10);

SELECT	* 
FROM 	Employee
WHERE	Lastname Like 'A%';

COMMIT;

